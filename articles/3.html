<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>2022年05月06日</title><meta name="next-head-count" content="3"/><link rel="preload" href="/nippo/_next/static/css/95afb002adb6ecb3.css" as="style"/><link rel="stylesheet" href="/nippo/_next/static/css/95afb002adb6ecb3.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/nippo/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/nippo/_next/static/chunks/webpack-3a654f3376b3966c.js" defer=""></script><script src="/nippo/_next/static/chunks/framework-a87821de553db91d.js" defer=""></script><script src="/nippo/_next/static/chunks/main-b5176cf273414c82.js" defer=""></script><script src="/nippo/_next/static/chunks/pages/_app-6fbda22e3f08c5c8.js" defer=""></script><script src="/nippo/_next/static/chunks/582-d79da0492f1f9267.js" defer=""></script><script src="/nippo/_next/static/chunks/pages/articles/%5BissueNumber%5D-85297a4559960803.js" defer=""></script><script src="/nippo/_next/static/tGz17eJQnT2_-fPhwjGe_/_buildManifest.js" defer=""></script><script src="/nippo/_next/static/tGz17eJQnT2_-fPhwjGe_/_ssgManifest.js" defer=""></script><script src="/nippo/_next/static/tGz17eJQnT2_-fPhwjGe_/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><header><nav><p><a href="/nippo">r7kamura/nippo</a></p></nav></header><main><article><section><header><h1><time dateTime="2022-05-06T22:03:49Z" title="2022-05-06T22:03:49Z">2022年05月06日</time></h1></header><aside><p>Posted by <!-- --><a href="https://github.com/r7kamura">r7kamura</a> at <!-- --><a href="https://github.com/r7kamura/nippo/issues/3">#3</a>.<!-- --></p></aside><div></div></section><article><section><div><p dir="auto">ここ数年間Chrome拡張を触っていなかったので、2022年のChrome拡張のつくり方を調べた。</p>
<p dir="auto">Twitterで尋ねたらk0kubunが良さそうなページを教えてくれた。感謝…</p>
<ul dir="auto">
<li><a href="https://developer.chrome.com/docs/extensions/mv3/getstarted/" rel="nofollow">https://developer.chrome.com/docs/extensions/mv3/getstarted/</a></li>
</ul>
<p dir="auto">TypeScriptで書き始めたいところではある。</p></div></section></article><article><section><div><ul dir="auto">
<li>TypeScriptは何らかのツールでビルド
<ul dir="auto">
<li><a href="https://github.com/vercel/ncc">https://github.com/vercel/ncc</a> はNode.jsプロジェクト用なので活用できない</li>
<li>面倒だけどWebpackが妥当そうではある</li>
</ul>
</li>
<li>manifest.jsonやHTML等も含めた全ての成果物をdistディレクトリに詰め込む</li>
<li>バージョンごとにdistをZip化</li>
<li>手作業でChrome Web Storeに提出</li>
</ul>
<p dir="auto">という運用が良いのでは無いだろうか。</p></div></section></article><article><section><div><p dir="auto">最近はVSCodeのターミナルを常に使うようにしたので、Windows Terminalを使う機会が無くなったというのを思い出した。Windowsを使いはじめた頃はまだVSCodeのターミナルを使う慣習が無かったので、常にそこで作業していた。</p>
<p dir="auto">とはいえ、VSCodeで、そのプロジェクト (ワークスペース) ではない別のプロジェクトの物事を何かしたくなったときには、少し変な感じがする。関係の無い適当なプロジェクトを開いて、そこのターミナルでリポジトリを新たにつくるコマンドを叩いたりしている。</p></div></section></article><article><section><div><p dir="auto">vite (比較的新し目のフロントエンド向けビルドツール) が良さそうだったので、Webpackではなくこちらを試してみることにした。</p>
<ul dir="auto">
<li><a href="https://dev.to/jacksteamdev/create-a-vite-react-chrome-extension-in-90-seconds-3df7" rel="nofollow">https://dev.to/jacksteamdev/create-a-vite-react-chrome-extension-in-90-seconds-3df7</a></li>
</ul>
<pre class="notranslate"><code class="notranslate">npm init vite@latest
</code></pre>
<p dir="auto">上のコマンドでひな形が作れるようだったので試した。実際には、プロジェクトを既に作った後だったので、それを一時ディレクトリで叩いたあと、必要なファイルを持ってくる、という大変な作業をこなした。</p>
<p dir="auto">npm initにそういうコマンドを利用できるのも知らなかったけど、便利だなーこれは。<code class="notranslate">npm help init</code> を叩くと説明されていて、上のコマンド例だと <code class="notranslate">npm exec create-vite@latest</code> が実行されているらしい。</p>
<ul dir="auto">
<li><a href="https://github.com/vitejs/vite/tree/main/packages/create-vite#readme">https://github.com/vitejs/vite/tree/main/packages/create-vite#readme</a></li>
</ul>
<p dir="auto"><code class="notranslate">npm exec</code> は普段使っている <code class="notranslate">npx</code> のalias。<code class="notranslate">npm init</code> は <code class="notranslate">npm create</code> というaliasもある。</p>
<p dir="auto">Jack Steamさんのこの記事を参考につくっていっている。</p>
<ul dir="auto">
<li><a href="https://dev.to/jacksteamdev/create-a-vite-react-chrome-extension-in-90-seconds-3df7" rel="nofollow">https://dev.to/jacksteamdev/create-a-vite-react-chrome-extension-in-90-seconds-3df7</a></li>
</ul></div></section></article><article><section><div><p dir="auto">とりあえずリポジトリをつくった。</p>
<ul dir="auto">
<li><a href="https://github.com/r7kamura/copy-rich-link">https://github.com/r7kamura/copy-rich-link</a></li>
</ul></div></section></article><article><section><div><p dir="auto">viteのChrome extension向け機能を入れた。</p>
<pre class="notranslate"><code class="notranslate">npm i -D @crxjs/vite-plugin
</code></pre>
<p dir="auto">vite.config.ts でこのプラグインを利用して「manifest.jsonフを元にいい感じにしてくれ」と伝えると、ビルド時にmanifest.jsonを見て必要なものを全部ビルドしてくれるらしい。例えばmanifest.jsonに「Chrome extensionのアイコンがクリックされたときはこのHTMLを表示する」と定義されていたら、そのHTMLファイルをビルド対象に含めてくれるし、更にそのHTMLファイルで参照されているJavaScriptも含めてくれる。</p>
<pre class="notranslate"><code class="notranslate">npm run build
explorer.exe .
</code></pre>
<p dir="auto">ビルドするとdistディレクトリが出来上がるので、これを chrome://extensions のダッシュボードにDrag &amp; Dropすると、無事拡張が読み込まれた。</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/111689/167227302-68cef7e1-b0a9-4472-8913-63008bc45504.png"><img src="https://user-images.githubusercontent.com/111689/167227302-68cef7e1-b0a9-4472-8913-63008bc45504.png" alt="image" style="max-width: 100%;"></a></p></div></section></article><article><section><div><pre class="notranslate"><code class="notranslate">npm run dev
</code></pre>
<p dir="auto">とやっている状態でChrome拡張を読み込ませて、ポップアップを開いたままにしてソースコードを書き換えると、HMRで自動的に内容を書き換えてくれる。<br>
<a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/111689/167229306-fb119b4c-70ae-4e03-be9a-e12267fe70c5.gif"><img src="https://user-images.githubusercontent.com/111689/167229306-fb119b4c-70ae-4e03-be9a-e12267fe70c5.gif" alt="1" style="max-width: 100%;"></a></p></div></section></article></article></main><footer><nav><ul><li><a href="/nippo">Home</a></li></ul></nav></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"issue":{"active_lock_reason":null,"assignee":null,"assignees":[],"author_association":"OWNER","body":null,"closed_at":null,"comments":0,"comments_url":"https://api.github.com/repos/r7kamura/nippo/issues/3/comments","created_at":"2022-05-06T22:03:49Z","events_url":"https://api.github.com/repos/r7kamura/nippo/issues/3/events","html_url":"https://github.com/r7kamura/nippo/issues/3","id":1228420492,"labels":[],"labels_url":"https://api.github.com/repos/r7kamura/nippo/issues/3/labels{/name}","locked":false,"milestone":null,"node_id":"I_kwDOHSfx5s5JODWM","number":3,"performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/r7kamura/nippo/issues/3/reactions"},"repository_url":"https://api.github.com/repos/r7kamura/nippo","state":"open","timeline_url":"https://api.github.com/repos/r7kamura/nippo/issues/3/timeline","title":"日報","updated_at":"2022-05-06T22:03:49Z","url":"https://api.github.com/repos/r7kamura/nippo/issues/3","user":{"avatar_url":"https://avatars.githubusercontent.com/u/111689?v=4","events_url":"https://api.github.com/users/r7kamura/events{/privacy}","followers_url":"https://api.github.com/users/r7kamura/followers","following_url":"https://api.github.com/users/r7kamura/following{/other_user}","gists_url":"https://api.github.com/users/r7kamura/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/r7kamura","id":111689,"login":"r7kamura","node_id":"MDQ6VXNlcjExMTY4OQ==","organizations_url":"https://api.github.com/users/r7kamura/orgs","received_events_url":"https://api.github.com/users/r7kamura/received_events","repos_url":"https://api.github.com/users/r7kamura/repos","site_admin":false,"starred_url":"https://api.github.com/users/r7kamura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r7kamura/subscriptions","type":"User","url":"https://api.github.com/users/r7kamura"},"bodyHTML":null},"issueComments":[{"author_association":"OWNER","body":"ここ数年間Chrome拡張を触っていなかったので、2022年のChrome拡張のつくり方を調べた。\r\n\r\nTwitterで尋ねたらk0kubunが良さそうなページを教えてくれた。感謝…\r\n\r\n- https://developer.chrome.com/docs/extensions/mv3/getstarted/\r\n\r\nTypeScriptで書き始めたいところではある。","created_at":"2022-05-06T22:05:35Z","html_url":"https://github.com/r7kamura/nippo/issues/3#issuecomment-1120043383","id":1120043383,"issue_url":"https://api.github.com/repos/r7kamura/nippo/issues/3","node_id":"IC_kwDOHSfx5s5CwoF3","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/r7kamura/nippo/issues/comments/1120043383/reactions"},"updated_at":"2022-05-06T22:05:35Z","url":"https://api.github.com/repos/r7kamura/nippo/issues/comments/1120043383","user":{"avatar_url":"https://avatars.githubusercontent.com/u/111689?v=4","events_url":"https://api.github.com/users/r7kamura/events{/privacy}","followers_url":"https://api.github.com/users/r7kamura/followers","following_url":"https://api.github.com/users/r7kamura/following{/other_user}","gists_url":"https://api.github.com/users/r7kamura/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/r7kamura","id":111689,"login":"r7kamura","node_id":"MDQ6VXNlcjExMTY4OQ==","organizations_url":"https://api.github.com/users/r7kamura/orgs","received_events_url":"https://api.github.com/users/r7kamura/received_events","repos_url":"https://api.github.com/users/r7kamura/repos","site_admin":false,"starred_url":"https://api.github.com/users/r7kamura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r7kamura/subscriptions","type":"User","url":"https://api.github.com/users/r7kamura"},"bodyHTML":"\u003cp dir=\"auto\"\u003eここ数年間Chrome拡張を触っていなかったので、2022年のChrome拡張のつくり方を調べた。\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eTwitterで尋ねたらk0kubunが良さそうなページを教えてくれた。感謝…\u003c/p\u003e\n\u003cul dir=\"auto\"\u003e\n\u003cli\u003e\u003ca href=\"https://developer.chrome.com/docs/extensions/mv3/getstarted/\" rel=\"nofollow\"\u003ehttps://developer.chrome.com/docs/extensions/mv3/getstarted/\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp dir=\"auto\"\u003eTypeScriptで書き始めたいところではある。\u003c/p\u003e"},{"author_association":"OWNER","body":"- TypeScriptは何らかのツールでビルド\r\n    - https://github.com/vercel/ncc はNode.jsプロジェクト用なので活用できない\r\n    - 面倒だけどWebpackが妥当そうではある\r\n- manifest.jsonやHTML等も含めた全ての成果物をdistディレクトリに詰め込む\r\n- バージョンごとにdistをZip化\r\n- 手作業でChrome Web Storeに提出\r\n\r\nという運用が良いのでは無いだろうか。","created_at":"2022-05-06T22:10:30Z","html_url":"https://github.com/r7kamura/nippo/issues/3#issuecomment-1120045791","id":1120045791,"issue_url":"https://api.github.com/repos/r7kamura/nippo/issues/3","node_id":"IC_kwDOHSfx5s5Cworf","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/r7kamura/nippo/issues/comments/1120045791/reactions"},"updated_at":"2022-05-06T22:10:30Z","url":"https://api.github.com/repos/r7kamura/nippo/issues/comments/1120045791","user":{"avatar_url":"https://avatars.githubusercontent.com/u/111689?v=4","events_url":"https://api.github.com/users/r7kamura/events{/privacy}","followers_url":"https://api.github.com/users/r7kamura/followers","following_url":"https://api.github.com/users/r7kamura/following{/other_user}","gists_url":"https://api.github.com/users/r7kamura/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/r7kamura","id":111689,"login":"r7kamura","node_id":"MDQ6VXNlcjExMTY4OQ==","organizations_url":"https://api.github.com/users/r7kamura/orgs","received_events_url":"https://api.github.com/users/r7kamura/received_events","repos_url":"https://api.github.com/users/r7kamura/repos","site_admin":false,"starred_url":"https://api.github.com/users/r7kamura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r7kamura/subscriptions","type":"User","url":"https://api.github.com/users/r7kamura"},"bodyHTML":"\u003cul dir=\"auto\"\u003e\n\u003cli\u003eTypeScriptは何らかのツールでビルド\n\u003cul dir=\"auto\"\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/vercel/ncc\"\u003ehttps://github.com/vercel/ncc\u003c/a\u003e はNode.jsプロジェクト用なので活用できない\u003c/li\u003e\n\u003cli\u003e面倒だけどWebpackが妥当そうではある\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003emanifest.jsonやHTML等も含めた全ての成果物をdistディレクトリに詰め込む\u003c/li\u003e\n\u003cli\u003eバージョンごとにdistをZip化\u003c/li\u003e\n\u003cli\u003e手作業でChrome Web Storeに提出\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp dir=\"auto\"\u003eという運用が良いのでは無いだろうか。\u003c/p\u003e"},{"author_association":"OWNER","body":"最近はVSCodeのターミナルを常に使うようにしたので、Windows Terminalを使う機会が無くなったというのを思い出した。Windowsを使いはじめた頃はまだVSCodeのターミナルを使う慣習が無かったので、常にそこで作業していた。\r\n\r\nとはいえ、VSCodeで、そのプロジェクト (ワークスペース) ではない別のプロジェクトの物事を何かしたくなったときには、少し変な感じがする。関係の無い適当なプロジェクトを開いて、そこのターミナルでリポジトリを新たにつくるコマンドを叩いたりしている。","created_at":"2022-05-06T23:04:09Z","html_url":"https://github.com/r7kamura/nippo/issues/3#issuecomment-1120066491","id":1120066491,"issue_url":"https://api.github.com/repos/r7kamura/nippo/issues/3","node_id":"IC_kwDOHSfx5s5Cwtu7","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/r7kamura/nippo/issues/comments/1120066491/reactions"},"updated_at":"2022-05-06T23:04:09Z","url":"https://api.github.com/repos/r7kamura/nippo/issues/comments/1120066491","user":{"avatar_url":"https://avatars.githubusercontent.com/u/111689?v=4","events_url":"https://api.github.com/users/r7kamura/events{/privacy}","followers_url":"https://api.github.com/users/r7kamura/followers","following_url":"https://api.github.com/users/r7kamura/following{/other_user}","gists_url":"https://api.github.com/users/r7kamura/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/r7kamura","id":111689,"login":"r7kamura","node_id":"MDQ6VXNlcjExMTY4OQ==","organizations_url":"https://api.github.com/users/r7kamura/orgs","received_events_url":"https://api.github.com/users/r7kamura/received_events","repos_url":"https://api.github.com/users/r7kamura/repos","site_admin":false,"starred_url":"https://api.github.com/users/r7kamura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r7kamura/subscriptions","type":"User","url":"https://api.github.com/users/r7kamura"},"bodyHTML":"\u003cp dir=\"auto\"\u003e最近はVSCodeのターミナルを常に使うようにしたので、Windows Terminalを使う機会が無くなったというのを思い出した。Windowsを使いはじめた頃はまだVSCodeのターミナルを使う慣習が無かったので、常にそこで作業していた。\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eとはいえ、VSCodeで、そのプロジェクト (ワークスペース) ではない別のプロジェクトの物事を何かしたくなったときには、少し変な感じがする。関係の無い適当なプロジェクトを開いて、そこのターミナルでリポジトリを新たにつくるコマンドを叩いたりしている。\u003c/p\u003e"},{"author_association":"OWNER","body":"vite (比較的新し目のフロントエンド向けビルドツール) が良さそうだったので、Webpackではなくこちらを試してみることにした。\r\n\r\n- https://dev.to/jacksteamdev/create-a-vite-react-chrome-extension-in-90-seconds-3df7\r\n\r\n```\r\nnpm init vite@latest\r\n```\r\n\r\n上のコマンドでひな形が作れるようだったので試した。実際には、プロジェクトを既に作った後だったので、それを一時ディレクトリで叩いたあと、必要なファイルを持ってくる、という大変な作業をこなした。\r\n\r\nnpm initにそういうコマンドを利用できるのも知らなかったけど、便利だなーこれは。`npm help init` を叩くと説明されていて、上のコマンド例だと `npm exec create-vite@latest` が実行されているらしい。\r\n\r\n- https://github.com/vitejs/vite/tree/main/packages/create-vite#readme\r\n\r\n`npm exec` は普段使っている `npx` のalias。`npm init` は `npm create` というaliasもある。\r\n\r\nJack Steamさんのこの記事を参考につくっていっている。\r\n\r\n- https://dev.to/jacksteamdev/create-a-vite-react-chrome-extension-in-90-seconds-3df7","created_at":"2022-05-06T23:06:13Z","html_url":"https://github.com/r7kamura/nippo/issues/3#issuecomment-1120067230","id":1120067230,"issue_url":"https://api.github.com/repos/r7kamura/nippo/issues/3","node_id":"IC_kwDOHSfx5s5Cwt6e","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/r7kamura/nippo/issues/comments/1120067230/reactions"},"updated_at":"2022-05-06T23:37:29Z","url":"https://api.github.com/repos/r7kamura/nippo/issues/comments/1120067230","user":{"avatar_url":"https://avatars.githubusercontent.com/u/111689?v=4","events_url":"https://api.github.com/users/r7kamura/events{/privacy}","followers_url":"https://api.github.com/users/r7kamura/followers","following_url":"https://api.github.com/users/r7kamura/following{/other_user}","gists_url":"https://api.github.com/users/r7kamura/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/r7kamura","id":111689,"login":"r7kamura","node_id":"MDQ6VXNlcjExMTY4OQ==","organizations_url":"https://api.github.com/users/r7kamura/orgs","received_events_url":"https://api.github.com/users/r7kamura/received_events","repos_url":"https://api.github.com/users/r7kamura/repos","site_admin":false,"starred_url":"https://api.github.com/users/r7kamura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r7kamura/subscriptions","type":"User","url":"https://api.github.com/users/r7kamura"},"bodyHTML":"\u003cp dir=\"auto\"\u003evite (比較的新し目のフロントエンド向けビルドツール) が良さそうだったので、Webpackではなくこちらを試してみることにした。\u003c/p\u003e\n\u003cul dir=\"auto\"\u003e\n\u003cli\u003e\u003ca href=\"https://dev.to/jacksteamdev/create-a-vite-react-chrome-extension-in-90-seconds-3df7\" rel=\"nofollow\"\u003ehttps://dev.to/jacksteamdev/create-a-vite-react-chrome-extension-in-90-seconds-3df7\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"notranslate\"\u003e\u003ccode class=\"notranslate\"\u003enpm init vite@latest\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp dir=\"auto\"\u003e上のコマンドでひな形が作れるようだったので試した。実際には、プロジェクトを既に作った後だったので、それを一時ディレクトリで叩いたあと、必要なファイルを持ってくる、という大変な作業をこなした。\u003c/p\u003e\n\u003cp dir=\"auto\"\u003enpm initにそういうコマンドを利用できるのも知らなかったけど、便利だなーこれは。\u003ccode class=\"notranslate\"\u003enpm help init\u003c/code\u003e を叩くと説明されていて、上のコマンド例だと \u003ccode class=\"notranslate\"\u003enpm exec create-vite@latest\u003c/code\u003e が実行されているらしい。\u003c/p\u003e\n\u003cul dir=\"auto\"\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/vitejs/vite/tree/main/packages/create-vite#readme\"\u003ehttps://github.com/vitejs/vite/tree/main/packages/create-vite#readme\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp dir=\"auto\"\u003e\u003ccode class=\"notranslate\"\u003enpm exec\u003c/code\u003e は普段使っている \u003ccode class=\"notranslate\"\u003enpx\u003c/code\u003e のalias。\u003ccode class=\"notranslate\"\u003enpm init\u003c/code\u003e は \u003ccode class=\"notranslate\"\u003enpm create\u003c/code\u003e というaliasもある。\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eJack Steamさんのこの記事を参考につくっていっている。\u003c/p\u003e\n\u003cul dir=\"auto\"\u003e\n\u003cli\u003e\u003ca href=\"https://dev.to/jacksteamdev/create-a-vite-react-chrome-extension-in-90-seconds-3df7\" rel=\"nofollow\"\u003ehttps://dev.to/jacksteamdev/create-a-vite-react-chrome-extension-in-90-seconds-3df7\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e"},{"author_association":"OWNER","body":"とりあえずリポジトリをつくった。\r\n\r\n- https://github.com/r7kamura/copy-rich-link","created_at":"2022-05-06T23:06:30Z","html_url":"https://github.com/r7kamura/nippo/issues/3#issuecomment-1120067336","id":1120067336,"issue_url":"https://api.github.com/repos/r7kamura/nippo/issues/3","node_id":"IC_kwDOHSfx5s5Cwt8I","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/r7kamura/nippo/issues/comments/1120067336/reactions"},"updated_at":"2022-05-06T23:06:30Z","url":"https://api.github.com/repos/r7kamura/nippo/issues/comments/1120067336","user":{"avatar_url":"https://avatars.githubusercontent.com/u/111689?v=4","events_url":"https://api.github.com/users/r7kamura/events{/privacy}","followers_url":"https://api.github.com/users/r7kamura/followers","following_url":"https://api.github.com/users/r7kamura/following{/other_user}","gists_url":"https://api.github.com/users/r7kamura/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/r7kamura","id":111689,"login":"r7kamura","node_id":"MDQ6VXNlcjExMTY4OQ==","organizations_url":"https://api.github.com/users/r7kamura/orgs","received_events_url":"https://api.github.com/users/r7kamura/received_events","repos_url":"https://api.github.com/users/r7kamura/repos","site_admin":false,"starred_url":"https://api.github.com/users/r7kamura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r7kamura/subscriptions","type":"User","url":"https://api.github.com/users/r7kamura"},"bodyHTML":"\u003cp dir=\"auto\"\u003eとりあえずリポジトリをつくった。\u003c/p\u003e\n\u003cul dir=\"auto\"\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/r7kamura/copy-rich-link\"\u003ehttps://github.com/r7kamura/copy-rich-link\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e"},{"author_association":"OWNER","body":"viteのChrome extension向け機能を入れた。\r\n\r\n```\r\nnpm i -D @crxjs/vite-plugin\r\n```\r\n\r\nvite.config.ts でこのプラグインを利用して「manifest.jsonフを元にいい感じにしてくれ」と伝えると、ビルド時にmanifest.jsonを見て必要なものを全部ビルドしてくれるらしい。例えばmanifest.jsonに「Chrome extensionのアイコンがクリックされたときはこのHTMLを表示する」と定義されていたら、そのHTMLファイルをビルド対象に含めてくれるし、更にそのHTMLファイルで参照されているJavaScriptも含めてくれる。\r\n\r\n```\r\nnpm run build\r\nexplorer.exe .\r\n```\r\n\r\nビルドするとdistディレクトリが出来上がるので、これを chrome://extensions のダッシュボードにDrag \u0026 Dropすると、無事拡張が読み込まれた。\r\n\r\n![image](https://user-images.githubusercontent.com/111689/167227302-68cef7e1-b0a9-4472-8913-63008bc45504.png)","created_at":"2022-05-06T23:27:21Z","html_url":"https://github.com/r7kamura/nippo/issues/3#issuecomment-1120074088","id":1120074088,"issue_url":"https://api.github.com/repos/r7kamura/nippo/issues/3","node_id":"IC_kwDOHSfx5s5Cwvlo","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/r7kamura/nippo/issues/comments/1120074088/reactions"},"updated_at":"2022-05-06T23:27:21Z","url":"https://api.github.com/repos/r7kamura/nippo/issues/comments/1120074088","user":{"avatar_url":"https://avatars.githubusercontent.com/u/111689?v=4","events_url":"https://api.github.com/users/r7kamura/events{/privacy}","followers_url":"https://api.github.com/users/r7kamura/followers","following_url":"https://api.github.com/users/r7kamura/following{/other_user}","gists_url":"https://api.github.com/users/r7kamura/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/r7kamura","id":111689,"login":"r7kamura","node_id":"MDQ6VXNlcjExMTY4OQ==","organizations_url":"https://api.github.com/users/r7kamura/orgs","received_events_url":"https://api.github.com/users/r7kamura/received_events","repos_url":"https://api.github.com/users/r7kamura/repos","site_admin":false,"starred_url":"https://api.github.com/users/r7kamura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r7kamura/subscriptions","type":"User","url":"https://api.github.com/users/r7kamura"},"bodyHTML":"\u003cp dir=\"auto\"\u003eviteのChrome extension向け機能を入れた。\u003c/p\u003e\n\u003cpre class=\"notranslate\"\u003e\u003ccode class=\"notranslate\"\u003enpm i -D @crxjs/vite-plugin\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp dir=\"auto\"\u003evite.config.ts でこのプラグインを利用して「manifest.jsonフを元にいい感じにしてくれ」と伝えると、ビルド時にmanifest.jsonを見て必要なものを全部ビルドしてくれるらしい。例えばmanifest.jsonに「Chrome extensionのアイコンがクリックされたときはこのHTMLを表示する」と定義されていたら、そのHTMLファイルをビルド対象に含めてくれるし、更にそのHTMLファイルで参照されているJavaScriptも含めてくれる。\u003c/p\u003e\n\u003cpre class=\"notranslate\"\u003e\u003ccode class=\"notranslate\"\u003enpm run build\nexplorer.exe .\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp dir=\"auto\"\u003eビルドするとdistディレクトリが出来上がるので、これを chrome://extensions のダッシュボードにDrag \u0026amp; Dropすると、無事拡張が読み込まれた。\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e\u003ca target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/111689/167227302-68cef7e1-b0a9-4472-8913-63008bc45504.png\"\u003e\u003cimg src=\"https://user-images.githubusercontent.com/111689/167227302-68cef7e1-b0a9-4472-8913-63008bc45504.png\" alt=\"image\" style=\"max-width: 100%;\"\u003e\u003c/a\u003e\u003c/p\u003e"},{"author_association":"OWNER","body":"```\r\nnpm run dev\r\n```\r\n\r\nとやっている状態でChrome拡張を読み込ませて、ポップアップを開いたままにしてソースコードを書き換えると、HMRで自動的に内容を書き換えてくれる。\r\n![1](https://user-images.githubusercontent.com/111689/167229306-fb119b4c-70ae-4e03-be9a-e12267fe70c5.gif)\r\n\r\n","created_at":"2022-05-07T00:03:36Z","html_url":"https://github.com/r7kamura/nippo/issues/3#issuecomment-1120083454","id":1120083454,"issue_url":"https://api.github.com/repos/r7kamura/nippo/issues/3","node_id":"IC_kwDOHSfx5s5Cwx3-","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/r7kamura/nippo/issues/comments/1120083454/reactions"},"updated_at":"2022-05-07T00:03:36Z","url":"https://api.github.com/repos/r7kamura/nippo/issues/comments/1120083454","user":{"avatar_url":"https://avatars.githubusercontent.com/u/111689?v=4","events_url":"https://api.github.com/users/r7kamura/events{/privacy}","followers_url":"https://api.github.com/users/r7kamura/followers","following_url":"https://api.github.com/users/r7kamura/following{/other_user}","gists_url":"https://api.github.com/users/r7kamura/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/r7kamura","id":111689,"login":"r7kamura","node_id":"MDQ6VXNlcjExMTY4OQ==","organizations_url":"https://api.github.com/users/r7kamura/orgs","received_events_url":"https://api.github.com/users/r7kamura/received_events","repos_url":"https://api.github.com/users/r7kamura/repos","site_admin":false,"starred_url":"https://api.github.com/users/r7kamura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r7kamura/subscriptions","type":"User","url":"https://api.github.com/users/r7kamura"},"bodyHTML":"\u003cpre class=\"notranslate\"\u003e\u003ccode class=\"notranslate\"\u003enpm run dev\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp dir=\"auto\"\u003eとやっている状態でChrome拡張を読み込ませて、ポップアップを開いたままにしてソースコードを書き換えると、HMRで自動的に内容を書き換えてくれる。\u003cbr\u003e\n\u003ca target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/111689/167229306-fb119b4c-70ae-4e03-be9a-e12267fe70c5.gif\"\u003e\u003cimg src=\"https://user-images.githubusercontent.com/111689/167229306-fb119b4c-70ae-4e03-be9a-e12267fe70c5.gif\" alt=\"1\" style=\"max-width: 100%;\"\u003e\u003c/a\u003e\u003c/p\u003e"}]},"__N_SSG":true},"page":"/articles/[issueNumber]","query":{"issueNumber":"3"},"buildId":"tGz17eJQnT2_-fPhwjGe_","assetPrefix":"/nippo","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>